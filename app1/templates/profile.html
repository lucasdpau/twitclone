{%extends "basetemplate.html" %}
    {%block title %}
        <title>Profile for {{ profile_name }}</title>
    {%endblock%}
    {%block content%}
    </head>
    <body class="profile_wrapper">
        <div>
            <div class="profile_header">
                <div class="profile_banner">

                </div>
                <div class="profile_pic_wrapper">
                    {% load static %}
                        <img src="{% static 'app1/' %}{{profile_pic}}" class="profile_pic">
                </div>
                {% if not is_own_profile %}
                {% if already_following %}
                <div class="profile_unfollow_button">
		    <form action="/follow/{{profile_name}}" method="POST">
			{% csrf_token %}
                    	<button class="button" type="submit" value="unfollow" name="follow">
                        	Unfollow
                    	</button>
		    </form>
                </div>
                {% else %}
                <div class="profile_follow_button">
		    <form action="/follow/{{profile_name}}" method="POST">
			{% csrf_token %}
                    	<button class="button" type="submit" value="follow" name="follow">
                        	Follow
                    	</button>
		    </form>
                </div>
                {% endif %}
                {% endif %}
            </div>
            <div class="profile_info">
                <div class="profile_username">
                    {{profile_name}}'s profile
                </div>
                <div class="profile_bio">
                    {{user_object.profile.bio}}
                </div>
		<div class="profile_other_info">
               	 	<div class="profile_location">
                   		Location: {{ user_object.profile.location }}
                	</div>
                	<div class="profile_joindate">
                    		Joined: {{ user_object.date_joined }}
                	</div>
		</div>
                <div class="profile_followers">
                    Followers: {% for profile in followers %}{{ profile.user.username }}, 
                    {% endfor %}
                </div>
            </div>
            <div class="tweet_container">
                    {% for tweet in tweets %}
                    <div class="tweetcard">
                        <div class="tweet_profile_pic">
                            {% load static %}
                            <a href="../profile/{{tweet.author}}">
                                <img src="{% static 'app1/' %}{{tweet.author.profile.profile_pic}}" class="profile_pic">
                            </a>
                        </div>
                        <div class="tweet_content">
                            <div class="tweet_content_header">
                                <div class="tweet_author">
                                    <a href="{{tweet.author}}">{{tweet.author}}</a>
                                </div>
                                <div class="tweet_time">
                                    {{tweet.datetime}}
                                </div>
                            </div>
                            <div class="tweet_content_text">
                                {{ tweet.text }}
                            </div>
                            <div class="tweet_footer">
                                <a href="/reply/{{tweet.id}}">Reply!</a>
                                <a href="/tweets/{{tweet.id}}">View Replies ({{tweet.replies}})</a>
				{% if is_own_profile %}
				<a href="/delete/{{tweet.id}}">Delete</a>
				{% endif %}
                                {% if tweet.is_liked_by_current_user %}
                                    <form action="/like/{{tweet.id}}" method="POST">
                                        {% csrf_token %}
                                        <button class="button unlike_button" type="submit" value="unlike" name="likebutton">
                                        Unlike
                                        </button>
                                    </form>
                                {% else %}                                    
                                    <form action="/like/{{tweet.id}}" method="POST">
                                        {% csrf_token %}
                                        <button class="button like_button" type="submit" value="like" name="likebutton">
                                        Like
                                        </button>
                                    </form>
                                {% endif %}
                            </div>
                            <div>
                                {% for tag in tweet.tag_list %}
                                    <a href="tags/{{ tag.tagname }}">#{{ tag.tagname }}</a>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    {% endfor %}
            </div>
        </div>
        <div>
	    <div class="tweetcard">
                <div class="tweet_profile_pic">
                    {% load static %}
                    <img src="{% static 'app1/' %}{{current_user.profile.profile_pic}}" class="profile_pic">
                </div>
		<div class="tweet_content">
            	    <form action="/profile/{{current_username}}" method="POST">
                	{% csrf_token %}  
           		<textarea name="tweet" placeholder="What's new?"></textarea>
			<br>
                	<input type="submit" value="TWEET (Max 140 chars)">
            	    </form>
		</div>
	    </div>
        </div>
        <div>
            <div>
                <a href="{% url 'logout' %}">Logout</a>
                <a href="{% url 'index' %}">Home</a>
            </div>
        </div>
    </body>
    {%endblock%}